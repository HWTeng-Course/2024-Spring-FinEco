## This homework is written by 賴岳錡 (312707052)

## ch04.25(g)

## Question:

For each model in (a)--(c), construct a 95% prediction interval for the value of a house with 2700 square feet.

## Answer:

To calculate the prediction interval , we need to find the unbiased predictor ${\hat{y}}$ and the standard error of the forecast $se(f) = \sqrt{var(f)}$ and t-statistic $t_\frac{\alpha}{2}(n-2)$ .

$$
var(f) = {\sigma^2} \cdot [1 + \frac{1}{N} + \frac{(x_0 - \bar{x}^2)}{\sum(x_i - \bar{x})^2}]
$$

The interval is

$$
[{\hat{y} \pm se(f) \cdot t_\frac{\alpha}{2}(n-2) }]
$$

PI_model_1 = [110,418]\
PI_model_2 = [111,466]\
PI_model_3 = [44.3,449]

## Code:


```r
read.csv("/Users/lai/Downloads/collegetown.csv")
```

```
##       price  sqft age pool fireplace close twostory occupied
## 1     96.50 16.77  10    0         0     0        0        0
## 2    106.00 17.51  10    0         0     0        0        0
## 3    114.00 18.37   9    0         0     0        0        1
## 4    119.90 29.10   9    0         0     0        0        0
## 5    122.70 14.68   9    0         0     0        0        1
## 6    125.00 18.23   8    0         0     0        0        0
## 7    125.50 21.86  10    0         0     0        0        1
## 8    129.90 16.10   9    0         0     0        0        1
## 9    130.00 17.10   7    0         0     0        0        0
## 10   137.00 18.26  10    0         0     0        0        1
## 11   138.00 19.32   9    0         0     0        0        1
## 12   158.00 19.88   6    0         0     0        0        1
## 13   167.00 22.48  10    0         0     0        0        1
## 14   475.00 42.91   5    0         1     0        1        0
## 15   490.00 40.71   6    0         1     0        0        0
## 16   520.00 42.91   5    0         1     0        1        1
## 17   158.00 21.55   5    0         1     0        0        0
## 18   170.00 21.03   3    0         1     0        0        0
## 19   179.00 20.50   3    0         1     0        0        0
## 20   181.00 20.03   4    0         1     0        0        0
## 21   183.00 19.95   4    0         1     0        0        0
## 22   184.00 20.05   4    0         1     0        0        1
## 23   188.50 19.47   3    0         1     0        0        1
## 24   188.88 21.55   5    0         1     0        0        1
## 25   189.90 20.06   4    0         1     0        0        0
## 26   198.00 21.12   3    0         1     0        0        1
## 27   198.50 21.87   4    0         1     0        0        1
## 28   199.50 23.41   5    1         1     0        0        0
## 29   199.90 20.35   2    0         1     0        0        1
## 30   200.00 22.01   5    0         1     0        0        1
## 31   201.00 20.41   3    0         1     0        0        0
## 32   203.50 21.12   4    0         1     0        0        1
## 33   210.00 21.01   2    0         1     0        0        1
## 34    98.80 10.00  10    0         0     0        0        1
## 35   125.00 31.22   9    1         1     0        0        0
## 36   145.00 10.80   6    0         0     0        0        0
## 37   163.00 27.47  10    0         1     0        0        1
## 38   177.50 11.65  10    0         0     0        0        0
## 39   185.00 28.05   9    0         0     0        0        0
## 40   185.00 30.18  10    0         1     0        0        1
## 41   187.00 14.64  10    0         0     0        0        0
## 42   188.00 20.28  10    0         0     0        1        1
## 43   200.00 32.66  10    0         1     0        0        0
## 44   215.00 26.70  10    0         1     0        0        1
## 45   215.00 24.93   8    0         0     0        0        1
## 46   215.00 25.88   8    0         1     0        0        0
## 47   240.00 39.91  10    0         1     0        0        1
## 48   247.00 19.80   6    0         0     0        0        0
## 49   255.00 19.63  10    0         1     0        0        0
## 50   265.00 20.96  10    0         0     0        0        1
## 51   265.00 24.93   8    0         0     0        0        1
## 52   268.00 25.30  10    0         0     0        0        1
## 53   279.00 27.47   9    0         0     0        1        1
## 54   279.00 23.15   9    0         1     0        0        0
## 55   285.00 23.00  10    0         1     0        0        1
## 56   285.00 26.08  10    0         0     0        0        1
## 57   290.00 33.06  10    0         1     0        0        1
## 58   295.00 46.10   9    0         1     0        1        1
## 59   305.00 25.08  10    1         0     0        0        0
## 60   312.00 26.19  10    0         0     0        0        1
## 61   335.00 31.75  11    0         0     0        0        1
## 62   350.00 27.47   9    0         0     0        1        0
## 63   355.00 34.77   8    0         1     0        0        1
## 64   380.92 44.22   6    0         1     0        1        1
## 65   390.00 28.45  10    0         0     0        0        1
## 66   392.00 33.57  10    0         1     0        1        1
## 67   420.00 34.00   4    0         1     0        0        1
## 68   490.00 37.10   6    0         1     0        0        0
## 69   555.00 50.90   4    0         1     0        1        0
## 70   575.00 50.98  10    0         1     0        1        1
## 71   599.00 66.19  10    0         0     0        1        0
## 72  1125.00 67.30   3    1         1     0        1        1
## 73   132.00 15.97   9    0         0     0        0        1
## 74   155.00 22.17   9    0         1     0        0        0
## 75   162.50 14.88  10    0         0     0        0        0
## 76   165.00 23.54   9    0         0     0        0        0
## 77   176.00 22.20   9    0         0     0        0        1
## 78   185.00 22.22  10    0         0     0        0        1
## 79   187.00 22.17   9    0         1     0        0        1
## 80   287.00 32.49   7    0         0     0        1        0
## 81   445.00 42.18   2    0         1     0        0        1
## 82    50.00 23.40   9    0         0     0        0        0
## 83    52.50 22.30   9    0         0     0        0        0
## 84    53.00 19.47   9    0         0     0        0        0
## 85    57.00 20.67  11    0         0     0        0        0
## 86    67.00 19.44   9    0         0     0        0        0
## 87    69.50 24.10   9    0         0     0        0        0
## 88    72.50 21.02   8    0         0     0        0        0
## 89    85.00 25.63   6    0         0     0        0        0
## 90    90.00 22.53  10    0         0     0        0        0
## 91    93.15 15.55   9    0         0     0        0        0
## 92    93.50 24.66  10    0         1     0        0        0
## 93    99.90 19.91   9    0         1     0        0        0
## 94   100.00 16.12   9    0         0     0        0        0
## 95   110.00 24.02   8    0         0     0        0        0
## 96   113.00 23.50  10    0         1     0        0        1
## 97   114.00 25.96   6    0         0     0        0        0
## 98   116.00 25.00   9    0         0     0        0        0
## 99   118.50 20.71   8    0         0     0        0        0
## 100  119.00 22.75   9    0         0     0        0        0
## 101  120.00 19.46   9    0         0     0        0        0
## 102  121.90 25.14   8    0         0     0        0        1
## 103  124.00 16.81   9    0         0     0        0        0
## 104  124.90 24.78   9    0         0     0        0        1
## 105  125.00 20.02   8    0         0     0        0        0
## 106  125.00 24.54   9    0         0     0        0        1
## 107  125.90 24.19   9    0         0     0        0        1
## 108  129.90 19.70   9    0         0     0        0        0
## 109  130.00 26.15   9    0         0     0        0        0
## 110  131.40 25.54   9    0         0     0        0        0
## 111  132.50 31.31   9    0         0     0        0        0
## 112  133.30 25.05   8    0         1     0        0        0
## 113  133.90 29.37   9    0         1     0        0        1
## 114  134.00 21.32   6    0         0     0        0        0
## 115  134.00 31.81   9    0         1     0        0        0
## 116  135.00 20.94   9    0         0     0        0        1
## 117  136.00 27.53   9    0         0     0        0        0
## 118  136.50 22.94   9    0         0     0        0        1
## 119  136.90 20.94   9    0         0     0        0        1
## 120  137.00 29.52  10    0         0     0        0        0
## 121  138.00 20.00   8    0         0     0        0        0
## 122  139.00 26.39  10    0         0     0        0        0
## 123  139.00 22.46   8    0         1     0        0        1
## 124  139.00 24.43   9    0         0     0        0        0
## 125  145.00 27.94   8    0         0     0        0        1
##  [ reached 'max' / getOption("max.print") -- omitted 375 rows ]
```

```r
data = read.csv("/Users/lai/Downloads/collegetown.csv")
sqft = data$sqft
price = data$price
ln_price = log(price)
ln_sqft = log(sqft)
mean_sqft = mean(sqft)
b1 = coefficients(model_1)[1]
b2 = coefficients(model_1)[2]
a1 = coefficients(model_2)[1]
a2 = coefficients(model_2)[2]
d1 = coefficients(model_3)[1]
d2 = coefficients(model_3)[2]
model_1 = lm(ln_price~sqft , data = data)
model_2 = lm(ln_price~ln_sqft , data = data)
model_3 = lm(price~sqft , data = data)
price_1_hat = b1 + 27*b2
price_2_hat = a1 + log(27)*a2
price_3_hat = d1 + 27*d2
tvalue = qt(0.975,498)
vara_1_2 = vcov(model_1)[2,2]
sm1 = summary(model_1)
sigma_hat_1 = sm1$sigma^2 
varf_1 = sigma_hat_1 + sigma_hat_1/500 + (27- mean_sqft)^2 *vara_1_2 
sef_1 = sqrt(varf_1)
lowb_1 =exp( price_1_hat - tvalue *sef_1)
upb_1 =exp( price_1_hat + tvalue * sef_1)
#log-linear[110,418]

tvalue = qt(0.975,498)
vara_2_2 = vcov(model_2)[2,2]
sm2 = summary(model_2)
sigma_hat_2 = sm2$sigma^2 
varf_2 = sigma_hat_2 + sigma_hat_2/500 + (27- mean_sqft)^2 *vara_2_2 
sef_2 = sqrt(varf_2)
lowb_2 = exp(price_2_hat - tvalue *sef_2)
upb_2 = exp(price_2_hat + tvalue * sef_2)
#log-log[111,466]

tvalue = qt(0.975,498)
vara_3_2 = vcov(model_3)[2,2]
sm3 = summary(model_3)
sigma_hat_3 = sm3$sigma^2
varf_3 = sigma_hat_3 + sigma_hat_3/500 + (27- mean_sqft)^2 *vara_3_2
sef_3 = sqrt(varf_3)
lowb_3 = price_3_hat - tvalue *sef_3
upb_3 = price_3_hat + tvalue * sef_3
#linear[44.3,449]
```
